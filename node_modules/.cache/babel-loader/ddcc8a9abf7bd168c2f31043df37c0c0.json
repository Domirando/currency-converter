{"ast":null,"code":"import { actionTypes } from \"../action-types\";\nimport axios from \"axios\";\nexport const ConvertMoney = (amount, from, to) => {\n  return {\n    type: actionTypes.CONVERT,\n    payload: {\n      request_amount: amount,\n      from: from,\n      to: to,\n      response_amount: 0\n    }\n  };\n};\n_c = ConvertMoney;\n\nconst fetchWeatherSuccess = res => {\n  let to = Object.entries(res.data).map(item => {\n    console.log(item);\n    return item;\n  });\n  return {\n    type: actionTypes.FETCH_WEATHER_SUCCESS,\n    payload: {\n      to: to,\n      response_amount: 1200\n    }\n  };\n};\n\nexport const fetchData = (amount, from, to) => {\n  const API_KEY = 'FWcJsFtVZIgaioJaaTsmxsiGH2i53NOvy5boCoNc';\n  return async dispatch => {\n    try {\n      dispatch({\n        type: actionTypes.FETCH_WEATHER_REQUEST\n      });\n      let response;\n\n      if (amount && from && to) {\n        // @ts-ignore\n        response = await axios.get(\"https://api.currencyapi.com/v3/convert\");\n        console.log(response.data);\n      } else {\n        response = await axios.get(`https://api.currencyapi.com/v3/latest?apikey=${API_KEY}`);\n        let to = response.data.map(key => response.data[key][0]);\n        let amount = response.data.map(key => response.data[key][1]);\n        alert(\"answer\");\n        dispatch({\n          type: actionTypes.FETCH_WEATHER_SUCCESS,\n          payload: {\n            from: 'uuusd',\n            to: to,\n            response_amount: amount\n          }\n        });\n      }\n    } catch (error) {\n      dispatch({\n        type: actionTypes.FETCH_WEATHER_FAILURE,\n        payload: \"ooops, something went wrong!\"\n      });\n    }\n  };\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"ConvertMoney\");","map":{"version":3,"names":["actionTypes","axios","ConvertMoney","amount","from","to","type","CONVERT","payload","request_amount","response_amount","fetchWeatherSuccess","res","Object","entries","data","map","item","console","log","FETCH_WEATHER_SUCCESS","fetchData","API_KEY","dispatch","FETCH_WEATHER_REQUEST","response","get","key","alert","error","FETCH_WEATHER_FAILURE"],"sources":["/home/domirando/Projects/job-tasks/currency-converter/src/state/action-creators/index.ts"],"sourcesContent":["import {actionTypes} from \"../action-types\";\nimport axios from \"axios\";\nimport {Actions} from \"../actions\";\nimport {Dispatch} from \"react\";\n\nexport const ConvertMoney = (amount: number, from: string, to: string) => {\n    return {\n        type: actionTypes.CONVERT,\n        payload: {\n            request_amount: amount,\n            from: from,\n            to: to,\n            response_amount: 0,\n        }\n    }\n}\n\ntype CurrenciesList = {\n    data: object,\n    meta: object\n}\n\nconst fetchWeatherSuccess = (res: CurrenciesList) => {\n    let to = Object.entries(res.data).map(item => {\n        console.log(item)\n        return item\n    })\n    return {\n        type: actionTypes.FETCH_WEATHER_SUCCESS,\n        payload: {\n            to: to,\n            response_amount: 1200\n        }\n    }\n}\n\nexport const fetchData = (amount?: number, from?: string, to?: string) => {\n    const API_KEY = 'FWcJsFtVZIgaioJaaTsmxsiGH2i53NOvy5boCoNc'\n    return async (dispatch: Dispatch<Actions>) => {\n        try {\n            dispatch({type: actionTypes.FETCH_WEATHER_REQUEST})\n            let response: any;\n            if (amount && from && to) {\n                // @ts-ignore\n                response = await axios.get(\"https://api.currencyapi.com/v3/convert\")\n                console.log(response.data)\n            }else {\n                response = await axios.get(`https://api.currencyapi.com/v3/latest?apikey=${API_KEY}`)\n                let to = response.data.map((key: number) => response.data[key][0]);\n                let amount = response.data.map((key: number) => response.data[key][1]);\n                alert(\"answer\")\n                dispatch({type: actionTypes.FETCH_WEATHER_SUCCESS, payload: {\n                        from: 'uuusd',\n                        to: to,\n                        response_amount: amount\n                    }})\n            }\n        } catch (error) {\n            dispatch({type: actionTypes.FETCH_WEATHER_FAILURE, payload: \"ooops, something went wrong!\"})\n        }\n    }\n}"],"mappings":"AAAA,SAAQA,WAAR,QAA0B,iBAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAIA,OAAO,MAAMC,YAAY,GAAG,CAACC,MAAD,EAAiBC,IAAjB,EAA+BC,EAA/B,KAA8C;EACtE,OAAO;IACHC,IAAI,EAAEN,WAAW,CAACO,OADf;IAEHC,OAAO,EAAE;MACLC,cAAc,EAAEN,MADX;MAELC,IAAI,EAAEA,IAFD;MAGLC,EAAE,EAAEA,EAHC;MAILK,eAAe,EAAE;IAJZ;EAFN,CAAP;AASH,CAVM;KAAMR,Y;;AAiBb,MAAMS,mBAAmB,GAAIC,GAAD,IAAyB;EACjD,IAAIP,EAAE,GAAGQ,MAAM,CAACC,OAAP,CAAeF,GAAG,CAACG,IAAnB,EAAyBC,GAAzB,CAA6BC,IAAI,IAAI;IAC1CC,OAAO,CAACC,GAAR,CAAYF,IAAZ;IACA,OAAOA,IAAP;EACH,CAHQ,CAAT;EAIA,OAAO;IACHX,IAAI,EAAEN,WAAW,CAACoB,qBADf;IAEHZ,OAAO,EAAE;MACLH,EAAE,EAAEA,EADC;MAELK,eAAe,EAAE;IAFZ;EAFN,CAAP;AAOH,CAZD;;AAcA,OAAO,MAAMW,SAAS,GAAG,CAAClB,MAAD,EAAkBC,IAAlB,EAAiCC,EAAjC,KAAiD;EACtE,MAAMiB,OAAO,GAAG,0CAAhB;EACA,OAAO,MAAOC,QAAP,IAAuC;IAC1C,IAAI;MACAA,QAAQ,CAAC;QAACjB,IAAI,EAAEN,WAAW,CAACwB;MAAnB,CAAD,CAAR;MACA,IAAIC,QAAJ;;MACA,IAAItB,MAAM,IAAIC,IAAV,IAAkBC,EAAtB,EAA0B;QACtB;QACAoB,QAAQ,GAAG,MAAMxB,KAAK,CAACyB,GAAN,CAAU,wCAAV,CAAjB;QACAR,OAAO,CAACC,GAAR,CAAYM,QAAQ,CAACV,IAArB;MACH,CAJD,MAIM;QACFU,QAAQ,GAAG,MAAMxB,KAAK,CAACyB,GAAN,CAAW,gDAA+CJ,OAAQ,EAAlE,CAAjB;QACA,IAAIjB,EAAE,GAAGoB,QAAQ,CAACV,IAAT,CAAcC,GAAd,CAAmBW,GAAD,IAAiBF,QAAQ,CAACV,IAAT,CAAcY,GAAd,EAAmB,CAAnB,CAAnC,CAAT;QACA,IAAIxB,MAAM,GAAGsB,QAAQ,CAACV,IAAT,CAAcC,GAAd,CAAmBW,GAAD,IAAiBF,QAAQ,CAACV,IAAT,CAAcY,GAAd,EAAmB,CAAnB,CAAnC,CAAb;QACAC,KAAK,CAAC,QAAD,CAAL;QACAL,QAAQ,CAAC;UAACjB,IAAI,EAAEN,WAAW,CAACoB,qBAAnB;UAA0CZ,OAAO,EAAE;YACpDJ,IAAI,EAAE,OAD8C;YAEpDC,EAAE,EAAEA,EAFgD;YAGpDK,eAAe,EAAEP;UAHmC;QAAnD,CAAD,CAAR;MAKH;IACJ,CAlBD,CAkBE,OAAO0B,KAAP,EAAc;MACZN,QAAQ,CAAC;QAACjB,IAAI,EAAEN,WAAW,CAAC8B,qBAAnB;QAA0CtB,OAAO,EAAE;MAAnD,CAAD,CAAR;IACH;EACJ,CAtBD;AAuBH,CAzBM"},"metadata":{},"sourceType":"module"}