{"ast":null,"code":"import { actionTypes } from \"../action-types\";\nimport axios from \"axios\";\nexport const ConvertMoney = (amount, from, to) => {\n  return {\n    type: actionTypes.CONVERT,\n    payload: {\n      request_amount: amount,\n      from: from,\n      to: to,\n      response_amount: 0\n    }\n  };\n};\n_c = ConvertMoney;\nexport const fetchData = (amount, from, to) => {\n  const API_KEY = 'FWcJsFtVZIgaioJaaTsmxsiGH2i53NOvy5boCoNc';\n  const API_KEY_CONVERTER = 'c559a98ce0-4a8821046c-rdgxzw';\n  return async dispatch => {\n    try {\n      dispatch({\n        type: actionTypes.FETCH_WEATHER_REQUEST\n      });\n      let response;\n\n      if (amount && from && to) {\n        // @ts-ignore\n        response = await axios.get(`https://api.fastforex.io/fetch-one?from=${from}&to=${to}&api_key=${API_KEY_CONVERTER}`);\n        let item = Object.entries(response).map(item => item);\n        let item2 = item.map(item => item);\n        let item3 = Object.entries(item2[0]).map(item => item); // @ts-ignore\n\n        let from = item3[1][1].base; // @ts-ignore\n\n        let item4 = item3[1][1].result; // let smth = item3[1][1]\n\n        console.log(\"this\", from);\n        dispatch({\n          type: actionTypes.FETCH_WEATHER_SUCCESS,\n          payload: {\n            from: from,\n            to: to,\n            response_amount: amount\n          }\n        });\n      } else {\n        response = await axios.get(`https://api.currencyapi.com/v3/latest?apikey=${API_KEY}`);\n        console.log(\"response:\", response.data);\n        let items = Object.entries(response.data.data).map(item => item);\n        let items2 = items.map(item => item[1]); // @ts-ignore\n\n        let to = items2.map(item => item.code); // @ts-ignore\n\n        let amount = items2.map(item => item.value);\n        console.log(\"amount\", amount);\n        dispatch({\n          type: actionTypes.FETCH_WEATHER_SUCCESS,\n          payload: {\n            from: 'usd',\n            to: to,\n            response_amount: amount\n          }\n        });\n      }\n    } catch (error) {\n      dispatch({\n        type: actionTypes.FETCH_WEATHER_FAILURE,\n        payload: \"ooops, something went wrong!\"\n      });\n    }\n  };\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"ConvertMoney\");","map":{"version":3,"names":["actionTypes","axios","ConvertMoney","amount","from","to","type","CONVERT","payload","request_amount","response_amount","fetchData","API_KEY","API_KEY_CONVERTER","dispatch","FETCH_WEATHER_REQUEST","response","get","item","Object","entries","map","item2","item3","base","item4","result","console","log","FETCH_WEATHER_SUCCESS","data","items","items2","code","value","error","FETCH_WEATHER_FAILURE"],"sources":["/home/domirando/Projects/job-tasks/currency-converter/src/state/action-creators/index.ts"],"sourcesContent":["import {actionTypes} from \"../action-types\";\nimport axios from \"axios\";\nimport {Actions} from \"../actions\";\nimport {Dispatch} from \"react\";\n\nexport const ConvertMoney = (amount: number, from: string, to: string) => {\n    return {\n        type: actionTypes.CONVERT,\n        payload: {\n            request_amount: amount,\n            from: from,\n            to: to,\n            response_amount: 0,\n        }\n    }\n}\n\nexport const fetchData = (amount?: number, from?: string, to?: string) => {\n    const API_KEY = 'FWcJsFtVZIgaioJaaTsmxsiGH2i53NOvy5boCoNc'\n    const API_KEY_CONVERTER = 'c559a98ce0-4a8821046c-rdgxzw'\n    return async (dispatch: Dispatch<Actions>) => {\n        try {\n            dispatch({type: actionTypes.FETCH_WEATHER_REQUEST})\n            let response: any;\n            if (amount && from && to) {\n                // @ts-ignore\n                response = await axios.get(`https://api.fastforex.io/fetch-one?from=${from}&to=${to}&api_key=${API_KEY_CONVERTER}`)\n                let item = Object.entries(response).map(item => item)\n                let item2 = item.map(item => item)\n                let item3 = Object.entries(item2[0]).map(item => item)\n                // @ts-ignore\n                let from = item3[1][1].base\n                // @ts-ignore\n                let item4 = item3[1][1].result\n                // let smth = item3[1][1]\n                console.log(\"this\", from)\n                dispatch({type: actionTypes.FETCH_WEATHER_SUCCESS, payload: {\n                        from: from,\n                        to: to,\n                        response_amount: amount\n                    }})\n            }else {\n                response = await axios.get(`https://api.currencyapi.com/v3/latest?apikey=${API_KEY}`)\n                console.log(\"response:\", response.data)\n                let items = Object.entries(response.data.data).map(item => item)\n                let items2 = items.map(item => item[1])\n                // @ts-ignore\n                let to = items2.map(item => item.code)\n                // @ts-ignore\n                let amount = items2.map(item => item.value)\n                console.log(\"amount\", amount)\n                dispatch({type: actionTypes.FETCH_WEATHER_SUCCESS, payload: {\n                        from: 'usd',\n                        to: to,\n                        response_amount: amount\n                    }})\n            }\n        } catch (error) {\n            dispatch({type: actionTypes.FETCH_WEATHER_FAILURE, payload: \"ooops, something went wrong!\"})\n        }\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}